t() %>%
st_as_sf()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
bind_rows() %>%
t() %>%
st_as_sf()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
unlist() %>%
t() %>%
st_as_sf()
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
unlist() %>%
t()
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
t()
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
t()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
group_by(plot_id) %>%
# split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
t()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
t()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
t()
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox)
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc)
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
bind_rows()
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
bind_rows() %>%
t()
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
bind_rows() %>%
t() %>%
rownames_to_column()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
bind_rows() %>%
t() %>%
unlist() %>%
rownames_to_column()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
bind_rows() %>%
t() %>%
st_as_sf() %>%
rownames_to_column()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sf) #%>%
lapply(st_as_sf(0)
lapply(st_as_sf()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf)
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
lapply(rownames_to_column)
View(aim_pts_ssurgo)
bind_rows() #%>%
View(aim_pts_ssurgo)
bind_rows() #%>%
View(aim_pts_ssurgo)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
lapply(rownames_to_column)
View(aim_pts_ssurgo1)
data.table::rbindlist()
data.table::rbindlist(.)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
lapply(rownames_to_column) %>%
data.table::rbindlist()
View(aim_pts_ssurgo)
View(aim_pts_ssurgo1)
View(aim_pts_ssurgo1)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
purrr::map(names(sample_list), ~sample_list[[.x]] %>%
filter_at(vars(1),~. >= 20) %>%
mutate(groupName = .x)
) %>%
data.table::rbindlist()
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
purrr::map(names(.), ~.[[.x]] %>%
filter_at(vars(1),~. >= 20) %>%
mutate(groupName = .x)
) %>%
data.table::rbindlist()
View(aim_pts_ssurgo1)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist()
View(aim_pts_ssurgo)
View(aim_pts_ssurgo1)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
# group_by(plot_id) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
st_as_sf()
View(aim_pts_ssurgo1)
st_set_geometry(geometry)
?st_set_geometry
st_set_geometry(., geometry)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_set_geometry(., geometry)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_set_geometry(geometry)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) #%>%
View(aim_pts_ssurgo1)
ggplot(aim_pts_ssurgo1) +
geom_sf()
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf(geometry)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf()
ggplot(aim_pts_ssurgo1) +
geom_sf()
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
#lapply(st_bbox) %>%
#lapply(st_as_sfc) %>%
#lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf()
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
#lapply(st_bbox) %>%
#lapply(st_as_sfc) %>%
#lapply(st_as_sf) %>%
data.table::rbindlist() %>%
#rename('geometry' = x) %>%
st_as_sf()
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) #%>%
View(aim_pts_ssurgo1)
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) #%>%
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) #%>%
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
t()
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(bbox_wrap) %>%
unlist()
aim_pts_ssurgo1 <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf()
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf()
ggplot(aim_pts_ssurgo1) +
geom_sf()
View(initial_process)
View(aim_pts_ssurgo1)
View(aim_pts_ssurgo)
View(aim_pts_ssurgo1)
View(initial_process)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf() %>%
bind_cols(intial_process %>% dplyr::select(plot_id, Point_Type), .)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf() %>%
bind_cols(initial_process %>% dplyr::select(plot_id, Point_Type), .)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf() %>%
bind_cols(initial_process %>%
dplyr::select(plot_id, Point_Type) %>%
st_drop_geometry(), .)
View(aim_pts_ssurgo)
ggplot(aim_pts_ssurgo1) +
geom_sf(aes(col = Point_Type))
ggplot(aim_pts_ssurgo) +
geom_sf(aes(col = Point_Type))
View(aim_pts_ssurgo)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
st_as_sf() %>%
bind_cols(initial_process %>%
dplyr::select(plot_id, Point_Type) %>%
st_drop_geometry(), .) %>%
st_as_sf()
ggplot(aim_pts_ssurgo) +
geom_sf(aes(col = Point_Type))
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
rename('geometry' = x) %>%
bind_cols(initial_process %>%
dplyr::select(plot_id, Point_Type) %>%
st_drop_geometry(), .) %>%
st_as_sf()
ggplot(aim_pts_ssurgo) +
geom_sf(aes(col = Point_Type))
ggplot(aim_pts_ssurgo) +
geom_sf(aes(fill = Point_Type))
ggplot(aim_pts_ssurgo) +
geom_sf(aes(fill = Point_Type)) +
theme_classic()
ggplot(aim_pts_ssurgo) +
geom_sf(aes(fill = Point_Type)) +
theme_bw()
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), psate0(here(), '/data/raw/AOI_AIM_22_base.shp')
)
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), paste0(here(), '/data/raw/AOI_AIM_22_base.shp')
)
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), paste0(here(), '/data/raw/AOI_AIM_22_base.shp'),
quiet = T)
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), paste0(here(), '/data/raw/AOI_AIM_22_base.shp'),
quiet = T, append = T)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(1609) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
bind_cols(initial_process %>%
dplyr::select(plot_id, Point_Type) %>%
st_drop_geometry(), .) %>%
rename('geometry' = x, 'PartName' = plot_id) %>%
st_as_sf()
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), paste0(here(), '/data/raw/AOI_AIM_22_base.shp'),
quiet = T, overwrite = T)
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), paste0(here(), '/data/raw/AOI_AIM_22_base.shp'),
quiet = T, append = F)
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), paste0(here(), '/data/raw/AOI_AIM_22_over.shp'),
quiet = T)
intial_process[1,]
aim_pts_ssurgo[1,]
st_area(aim_pts_ssurgo[1,])
1609/2
1609.34/2
st_write(initial_process, paste0(here(), '/data/raw/AIM_Points_2022.shp'), quiet = T)
aim_pts_ssurgo <- initial_process %>%
st_transform(26913) %>%
st_buffer(805) %>%
split( ~ plot_id) %>%
lapply(st_bbox) %>%
lapply(st_as_sfc) %>%
lapply(st_as_sf) %>%
data.table::rbindlist() %>%
bind_cols(initial_process %>%
dplyr::select(plot_id, Point_Type) %>%
st_drop_geometry(), .) %>%
rename('geometry' = x, 'PartName' = plot_id) %>%
st_as_sf()
ggplot(aim_pts_ssurgo) +
geom_sf(aes(fill = Point_Type)) +
theme_bw()
st_area(aim_pts_ssurgo[1,])
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), paste0(here(), '/data/raw/AOI_AIM_22_base.shp'),
quiet = T, append = F)
st_write(aim_pts_ssurgo %>%
filter(Point_Type == 'Yes'), paste0(here(), '/data/raw/AOI_AIM_22_over.shp'),
quiet = T, append = F)
rm(initial_process)
